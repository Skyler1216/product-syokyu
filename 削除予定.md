# 📝 要件定義書

---

## 概要

### システム名

ハリネズミ健康管理アプリ『Hariny（ハリニー）』

### システム概要

『Hariny』は、ハリネズミの飼い主がスマートフォンや PC から簡単に健康状態や日々の記録を行える PWA 対応アプリです。多頭飼いにも対応し、体重・食事・通院などの詳細な情報を一元管理できます。

また、飼育データは匿名化され、保存時に日本ハリネズミ協会 ™ へリアルタイム送信されるため、全国的な飼育知見の集約に貢献します。

---

## システム開発に至った背景

飼い主によるハリネズミの健康管理は手書きや記憶に頼ったアナログな方法に留まりやすく、情報整理や継続が困難です。

また、日本ハリネズミ協会 ™ 側では飼育実態の詳細なデータが集まらず、知見や統計的な分析が進みにくい状況が長年続いていました。

---

## システム開発の目的

- 飼い主による日々の健康管理の負担を軽減し、見える化する
- ハリネズミの飼育実態を定量的に把握し、協会活動の質を向上させる
- 正しい飼育知識や注意点をアプリ内で届け、事故や病気を防止する

---

## 用語の定義

- Supabase：オープンソースの BaaS（Backend as a Service）で、データベース、認証、ストレージなどを提供
- PWA（Progressive Web App）：Web アプリながらスマホアプリのように使用できる技術

---

## 業務要件

### 現状（As-Is）

- アナログ管理（紙・メモ）中心で記録が散在
- 協会にはデータが集まらず、統計的情報に乏しい

### 理想（To-Be）

- 飼い主はスマホで簡単記録＆振り返り
- 記録と同時に協会へ匿名データ送信
- 協会は記録を分析し、情報発信や研究へ活用

---

## 規模

- 想定ユーザー数：500〜3,000 名（拡張性あり）
- 登録個体数：無制限（多頭飼い対応）
- 登録項目数：約 40 項目（健康記録含む）
- データ容量：Supabase 無料枠に基づく制限内

---

## 作業範囲

- 要件定義〜開発、PWA 実装、テスト、Vercel デプロイ
- 飼い主向けアプリ画面、協会向け管理画面（/admin）
- Google マイマップ連携（協会提供 URL）
- Supabase 構成（Auth／DB／Storage）
- アプリソースコード納品（App Store／Google Play 公開は対象外）

---

## 納入成果物

- 『Hariny』PWA 本体
- 管理画面（協会側）
- Supabase 構成（Auth, DB, Storage, Function）
- GitHub リポジトリ／Vercel デプロイ環境
- ドキュメント一式（構成説明、環境変数、導入手順）

---

## 機能要件

### 個体管理

- 名前、写真、生年月日（推定可）、性別、種類／カラー
- お迎え日、購入店情報、保険番号（任意）
- 協会提供同意ボタン

### 健康記録

- 食事量、種類、食いつき、飲水量
- 体重記録（グラフ化）、排泄物チェック（色、形、量など）
- 活動量、チェックリスト（目・耳・口・皮膚・行動など）
- 爪切り／風呂／掃除記録、温湿度、ふれあい記録

### 通院・治療

- 病院名、受診日、症状、薬、診断名
- 写真／PDF 記録 ⇒ 協会管理者画面で閲覧可能
- 次回予約リマインダー（画面アラート）

### アルバム

- Supabase ストレージに静止画を保存
- 日付ごとに写真記録を閲覧可能

### 情報コラム

- 協会による定期発信記事（季節情報・注意喚起など）

### 緊急連絡先

- かかりつけ病院・夜間救急病院の情報を登録／表示

### お世話リマインダー

- ごはん／掃除／投薬など、日付とセットで登録可能
- 初期はカレンダー表示＋アプリ内アラートに対応（プッシュ通知なし）

---

## 画面構成

- 飼い主：ホーム、プロフィール一覧、健康記録フォーム、履歴、カレンダー、アルバム、設定
- 協会：管理ダッシュボード、統計画面、CSV 出力、記録詳細ビュー

---

## データ

- PostgreSQL（Supabase DB）構成
- Supabase Storage で画像保存
- 通院記録の写真／PDF は協会側のみアクセス可能に設定

---

## 外部インタフェース

- Google マイマップ（病院 MAP）
- Supabase API（認証・CRUD・ストレージ連携）

---

## 非機能要件

- PWA（オフライン対応検討中）
- モバイルファースト UI（Tailwind CSS 予定）
- レスポンシブ対応（スマホ／タブレット／PC）

---

## システム構成

| 項目         | 使用技術                                 |
| ------------ | ---------------------------------------- |
| フロント     | Next.js（App Router）+ TypeScript        |
| バックエンド | Supabase（DB／Auth／Storage／Functions） |
| デプロイ     | Vercel（CI/CD、GitHub 連携）             |
| グラフ描画   | Chart.js or Recharts                     |
| アラート表示 | カレンダー＋画面内アラート（初期実装）   |

---

## 運用／保守

- 稼働時間：24 時間 365 日
- データバックアップ：Supabase 自動バックアップに依存
- 保守：エンジニア引き継ぎ資料含め納品（定期保守契約は別途）

---

## セキュリティ

- ユーザー認証（メール／パスワード）
- 行レベルセキュリティ（RLS）によるデータアクセス制御
- 協会管理者は匿名データの閲覧・分析が可能

---

## 公開範囲

- PWA リンク配布（App Store／Google Play は対象外）
- QR コードなどでユーザーに案内
